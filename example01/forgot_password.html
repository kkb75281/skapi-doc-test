<!DOCTYPE html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
</head>
<body>
    <h1>Forgot Password</h1>
    <form id='formChangePassword' action="login.html"
        onsubmit="skapi.resetPassword(event, { onerror: err => alert(err.message) })">
        <input id='email' type='email' name="email" placeholder="E-Mail">
        <br>
        <input name="code" placeholder="Code" required>
        <span onclick="requestCode()" style="cursor: pointer; text-decoration: underline;">Request Code</span>
        <br>
        <input name="new_password" type='password' placeholder="New Password" required>
        <br>
        <input type="submit" value="Change Password">
    </form>
</body>
<script>
    let skapi = new Skapi('ap22cPPliCZ5HTD2odru', 'ad5cb248-44f8-4f82-8f4d-655167007594');
    async function requestCode() {
        try {
            let response = await skapi.forgotPassword({ email: email.value });
            alert(response); // "SUCCESS: Verification code has been sent."
            // SUCCESS: Verification code has been sent. 메세지가 떴지만 메일이 오지 않음
        }
        catch (err) {
            alert(err.message);
        }
    }
</script>
