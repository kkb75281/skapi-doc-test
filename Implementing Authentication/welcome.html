<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
        <title>Welcome</title>
    </head>
    <body>
        <h1 id="welcome">Welcome #name</h1>
        <p id="your_email">Your e-mail is: #email</p>
        <form onsubmit="skapi.logout()" action="login.html">
            <input type="submit" value="Logout">
        </form>
    </body>
    <script>
        let skapi = new Skapi('ap22cPPliCZ5HTD2odru', 'ad5cb248-44f8-4f82-8f4d-655167007594', {autoLogin: true});
        skapi.getProfile().then(account => {
            if (account) {
                welcome.textContent = welcome.textContent.replace('#name', account.name || '');
                your_email.textContent = your_email.textContent.replace('#email', account.email);
            }
            else {
                // redirect user to login page
                let redirect = new URL('login.html');
                window.location.href = redirect.href;
            }
        });
    </script>
</html>
