<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
        <title>Forgot Password</title>
    </head>
    <body>
        <h1>Forgot Password</h1>
        <form action="login.html" onsubmit="skapi.resetPassword(event, { onerror: err => alert(err.message) })">
            <input id='email' type='email' name="email" placeholder="E-Mail">
            <br>
            <input name="code" placeholder="Code" required>
            <span onclick="requestCode()" style="cursor: pointer; text-decoration: underline;">Request Code</span>
            <br>
            <input name="new_password" type='password' placeholder="New Password" required>
            <br>
            <input type="submit" value="Change Password">
        </form>
    </body>
    <script>
        let skapi = new Skapi('ap22cPPliCZ5HTD2odru', 'ad5cb248-44f8-4f82-8f4d-655167007594');
        async function requestCode() {
            try {
                let response = await skapi.forgotPassword({ email: email.value });
                alert(response); // "SUCCESS: Verification code has been sent."
            }
            catch (err) {
                alert(err.message);
            }
        }
    </script>
</html>
